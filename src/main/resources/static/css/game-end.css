/* ================================
   🎮 遊戲結束畫面專用樣式（整合版）
   ================================ */

/* --- 整體背景 --- */
body {
  margin: 0;
  padding: 20px 0;
  box-sizing: border-box;
  font-family: "Noto Sans TC", "微軟正黑體", sans-serif;
  min-height: 100vh;

  /* 🟦 預設：不知道誰贏 → 顯示好人背景 */
  background: #000 url('/images/good.png') center/cover no-repeat fixed;
  color: #fff;
  overflow-x: hidden;

  /* 置中 */
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  /* 背景過渡與整體淡入 */
  transition: background 1s ease-in-out, filter 0.8s ease-out;
  animation: fadeIn 1s ease-out;
}

/* --- 標題 --- */
h1 {
  font-size: 48px;
  margin: 0 0 20px 0;
  color: #ffe08a;
  text-shadow: 2px 2px 6px #000;
  text-align: center;
}

/* --- 木牌區塊 --- */
.battle-summary {
  position: relative;
  width: 350px;
  max-width: 90%;
  margin: 0;
  text-align: center;
}

.trophy-board {
  width: 100%;
  display: block;
  border-radius: 12px;
  animation: popUp 0.8s ease-out forwards;
}

/* --- 疊在木牌上的文字 --- */
.summary-text {
  position: absolute;
  top: 46%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: #fffbe6;
  font-weight: bold;
  font-size: 22px;
  line-height: 1.6em;
  text-shadow: 2px 2px 4px #000;
}

#faction-resources {
  color: #fffbe6;
  font-size: 20px;
  white-space: pre-line;
}

#winner {
  color: gold;
  font-size: 24px;
  letter-spacing: 1px;
  animation: shimmer 1.5s infinite;
}

/* --- 額外訊息（例如成功卡數） --- */
#result-message {
  display: none;
  font-size: 24px;
  margin: 0 0 15px 0;
  color: #fff;
  text-shadow: 1px 1px 3px #000;
  text-align: center;
}

/* --- 按鈕 --- */
.btn {
  font-size: 20px;
  padding: 12px 28px;
  background-color: #3498db;
  color: white;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  text-decoration: none;
  transition: 0.2s;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
}

.btn:hover {
  background-color: #2980b9;
  transform: scale(1.05);
}

/* --- 主要內容 --- */
.main-content {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

/* --- 左右角色 --- */
.character-container {
  position: fixed;
  bottom: -5%;
  width: 350px;
  max-width: 25vw;
}

.character-container.left {
  left: 20%;
}

.character-container.right {
  right: 20%;
}

.character-container img {
  width: 100%;
  transition: opacity 0.3s ease-in-out;
}

/* 手機版隱藏角色 */
@media (max-width: 1000px) {
  .character-container {
    display: none;
  }
}

/* === 動畫區 === */

/* 整體淡入 */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* 左右角色進場 */
@keyframes slideInLeft {
  0% { transform: translateX(-120%) scale(0.9); opacity: 0; }
  100% { transform: translateX(0) scale(1); opacity: 1; }
}
@keyframes slideInRight {
  0% { transform: translateX(120%) scale(0.9); opacity: 0; }
  100% { transform: translateX(0) scale(1); opacity: 1; }
}

.character-container.left img {
  animation: slideInLeft 1s ease-out forwards;
}
.character-container.right img {
  animation: slideInRight 1s ease-out forwards;
}

/* 木牌彈出 */
@keyframes popUp {
  0% { transform: scale(0.6) rotate(-5deg); opacity: 0; }
  60% { transform: scale(1.1) rotate(3deg); opacity: 1; }
  100% { transform: scale(1) rotate(0deg); }
}

/* 勝利方文字閃光 */
@keyframes shimmer {
  0% { text-shadow: 0 0 6px gold, 0 0 10px orange; }
  50% { text-shadow: 0 0 20px yellow, 0 0 30px gold; }
  100% { text-shadow: 0 0 6px gold, 0 0 10px orange; }
}

/* === 勝利閃光特效（搭配 JS class 'bg-flash'） === */
.bg-flash {
  animation: bgFlash 1.1s ease-out;
}

@keyframes bgFlash {
  0%   { filter: brightness(0.75) saturate(0.9); }
  55%  { filter: brightness(1.35) saturate(1.15); }
  100% { filter: brightness(1) saturate(1); }
}

/* --- 手機 RWD --- */
@media (max-width: 600px) {
  h1 {
    font-size: 36px;
  }
  .summary-text {
    font-size: 18px;
    top: 50%;
  }
  #winner {
    font-size: 20px;
  }
}
